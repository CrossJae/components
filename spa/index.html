<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
<style>
</style>  


<script>
// 将代码封装在spa名字空间内
var spa = (function($){
    var
        configMap = {
            extended_height: 434,
            extended_title: 'Click to retract',
            retracted_height: 16,
            retracted_title: 'Click to extend',
            template_html: '<div class="spa-slider"><\/div>'
        },
        $chatSlider,
        toggleSlider, onClickSlider, initModule;
    toggleSlider = function(){
        var slider_height = $chatSlider.height();
        if(slider_height === configMap.retracted_height){
            $chatSlider
                .animate({height: configMap.extended_height})
                .attr('title', configMap.extended_title);
            return true;// ?
        }
        else if(slider_height === configMap.extended_height){
            $chatSlider
                .animate({height: configMap.retracted_height})
                .attr('title', configMap.retracted_title);
            return true;
        }
        return fasle;
    };
    onClickSlider = function(event){
        toggleSlider();
        return false;
    };
    initModule = function($container){
        $container.html(configMap.template_html);

        // $chatSlider 模块作用域变量
        $chatSlider = $chatSlider.find('.spa-slider');
        $chatSlider
            .attr('title', configMap.retracted_title)
            .click(onClickSlider);

        return true;
    };

    return {initModule: initModule};
}(jQuery));
</script>
</body>
</html>